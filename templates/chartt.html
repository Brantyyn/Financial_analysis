{% extends 'base.html' %}
    
{% block content %}
<!DOCTYPE html>
<html>
<head>
  <title>Whale Orders and Large Trades Chart</title>
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: monospace;
    }

    #chart {
      width: 800px;
      height: 400px;
      border: 1px solid #333;
      position: relative;
    }

    .candle {
      position: absolute;
      width: 5px;
      background-color: #f00;
      border-radius: 2px;
    }

    .candle.green {
      background-color: #0f0;
    }

    .volume-circle {
      position: absolute;
      border-radius: 50%;
      background-color: rgba(15, 255, 15, 0.3);
      opacity: 0.5;
    }
  </style>
</head>
<body>
  <h1>Whale Orders and Large Trades Chart</h1>
  <div id="chart"></div>

  <script>
    const chart = document.getElementById('chart');
    const data = [
      // Example data, replace with Binance API data
      { timestamp: 1691655600000, open: 59740.8, high: 59788.6, low: 59440, close: 59486, volume: 204650000 },
      // ... more data points
    ];

    // Function to draw a candle on the chart
    function drawCandle(candle, index) {
      const candleWidth = 5;
      const candleHeight = (candle.high - candle.low) * 10;
      const x = index * 10 + 10; // Space between candles
      const y = (candle.high - 59800) * -10 + 10; // Adjust for chart height

      const candleElement = document.createElement('div');
      candleElement.classList.add('candle');
      candleElement.style.left = `${x}px`;
      candleElement.style.top = `${y}px`;
      candleElement.style.height = `${candleHeight}px`;

      // Color the candle based on open/close
      if (candle.open < candle.close) {
        candleElement.classList.add('green');
      }

      chart.appendChild(candleElement);
    }

    // Function to draw volume circles
    function drawVolumeCircle(candle, index) {
      const circleRadius = Math.sqrt(candle.volume) * 0.01;
      const x = index * 10 + 10 + candleWidth / 2; // Center of candle
      const y = (candle.high - 59800) * -10 + 10 + candleHeight / 2; // Center of candle

      const circleElement = document.createElement('div');
      circleElement.classList.add('volume-circle');
      circleElement.style.left = `${x}px`;
      circleElement.style.top = `${y}px`;
      circleElement.style.width = `${circleRadius * 2}px`;
      circleElement.style.height = `${circleRadius * 2}px`;

      chart.appendChild(circleElement);
    }

    // Draw the candles and volume circles
    data.forEach((candle, index) => {
      drawCandle(candle, index);
      drawVolumeCircle(candle, index);
    });
  </script>
</body>
</html>
{% endblock %}
